<div class="sumup-container">
  <h1>SumUp Demo</h1>
  <div class="status">
    SDK Status:
    <span *ngIf="isSumupReady; else notReady" class="ready">Ready ✅</span>
    <ng-template #notReady><span class="not-ready">Not Initialized ❌</span></ng-template>
  </div>

  <!-- 1. Login -->
  <section>
    <h2>1. Login</h2>
    <!-- This button is disabled until the setup is complete -->
    <button (click)="doLogin()" [disabled]="!isSumupReady">Login to SumUp</button>
    <div *ngIf="loginResult" class="result">
      <div>ResultCode: {{ loginResult?.resultCode }}</div>
      <div>Message: {{ loginResult?.message }}</div>
    </div>
  </section>

  <!-- 2. Check Login Status -->
  <section>
    <h2>2. Check Login Status</h2>
    <button (click)="doCheckLoggedIn()" [disabled]="!isSumupReady">Check Login</button>
    <div *ngIf="loggedIn !== null" class="result">
      <span *ngIf="loggedIn; else notLogged">User is logged in</span>
      <ng-template #notLogged>User is not logged in</ng-template>
    </div>
  </section>

  <!-- 3. Get Merchant Info -->
  <section>
    <h2>3. Get Merchant Info</h2>
    <button (click)="doGetMerchant()" [disabled]="!isSumupReady">Get Merchant</button>
    <div *ngIf="merchant" class="result">
      <div>Merchant Code: {{ merchant?.merchantCode }}</div>
      <div>Currency: {{ merchant?.currency }}</div>
    </div>
  </section>

  <!-- 4. Logout -->
  <section>
    <h2>4. Logout</h2>
    <button (click)="doLogout()" [disabled]="!isSumupReady">Logout</button>
  </section>

  <!-- 5. Prepare for Checkout -->
  <section>
    <h2>5. Prepare for Checkout</h2>
    <button (click)="doPrepare()" [disabled]="!isSumupReady">Prepare Terminal</button>
  </section>

  <!-- 6. Open Card Reader Settings -->
  <section>
    <h2>6. Open Card Reader</h2>
    <button (click)="doOpenReader()" [disabled]="!isSumupReady">Open Reader</button>
    <div *ngIf="readerResult" class="result">
      <div>ResultCode: {{ readerResult?.resultCode }}</div>
      <div>Message: {{ readerResult?.message }}</div>
    </div>
  </section>

  <!-- 7. Perform Checkout -->
  <section>
    <h2>7. Perform Checkout</h2>
    <button (click)="doCheckout()" [disabled]="!isSumupReady">Checkout €1.23</button>
    <div *ngIf="checkoutResult" class="result">
      <div>ResultCode: {{ checkoutResult?.resultCode }}</div>
      <div>Message: {{ checkoutResult?.message }}</div>
      <div *ngIf="checkoutResult?.transactionCode">
        TransactionCode: {{ checkoutResult.transactionCode }}
      </div>
      <div *ngIf="checkoutResult?.receiptSent !== undefined">
        ReceiptSent: {{ checkoutResult.receiptSent }}
      </div>
    </div>
  </section>
</div>
